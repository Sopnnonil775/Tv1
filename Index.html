<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Premium Live TV - Crown Access</title>
    
    <link href="https://vjs.zencdn.net/7.20.3/video-js.min.css" rel="stylesheet" />
    
    <style>
        body { background-color: #0a0a0a; color: #fff; font-family: 'Segoe UI', sans-serif; margin: 0; padding: 0; overflow-x: hidden; }

        /* লগইন স্ক্রিন স্টাইল */
        #login-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, #1a1a1a 0%, #000 100%);
            display: flex; align-items: center; justify-content: center;
            z-index: 10000;
        }
        .login-box {
            background: rgba(30, 30, 30, 0.9); padding: 40px; border-radius: 20px;
            box-shadow: 0 0 20px rgba(229, 9, 20, 0.4); text-align: center;
            width: 350px; border: 1px solid #333; backdrop-filter: blur(10px);
        }
        .login-box h2 { color: #e50914; margin-bottom: 25px; font-size: 28px; letter-spacing: 2px; }
        .login-box input {
            width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #444;
            border-radius: 8px; background: #222; color: white; outline: none; box-sizing: border-box;
        }
        .login-box input:focus { border-color: #e50914; }
        .login-box button {
            width: 100%; padding: 14px; background: #e50914; color: white;
            border: none; border-radius: 8px; cursor: pointer; font-weight: bold;
            margin-top: 20px; transition: 0.3s; font-size: 16px;
        }
        .login-box button:hover { background: #b20710; transform: scale(1.02); }

        /* মেইন অ্যাপ কন্টেন্ট (শুরুতে লুকানো) */
        #main-app { display: none; padding: 20px; }
        .container { max-width: 1000px; margin: auto; }
        
        .header-nav { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .logout-btn { background: #333; color: #fff; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; }

        .player-wrapper { position: relative; background: #000; border-radius: 12px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.8); margin-bottom: 20px; border: 1px solid #333; }
        .video-js { width: 100% !important; height: 500px !important; }
        
        /* চ্যানেল লিস্ট স্টাইল */
        .channel-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 12px; max-height: 400px; overflow-y: auto; padding: 10px; background: #151515; border-radius: 10px; border: 1px solid #333; }
        .channel-item { background: #222; border-radius: 8px; padding: 15px 10px; text-align: center; cursor: pointer; transition: 0.3s; border: 1px solid #444; font-size: 13px; font-weight: bold; color: #ccc; }
        .channel-item:hover { background: #e50914; color: #fff; transform: translateY(-3px); border-color: #e50914; }
        .channel-item.active { background: #e50914; color: #fff; border-color: #fff; }
        
        .header-title { text-align: center; color: #e50914; font-size: 24px; text-transform: uppercase; letter-spacing: 2px; margin: 0; }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: #e50914; border-radius: 10px; }

        @media (max-width: 600px) {
            .video-js { height: 250px !important; }
            .channel-grid { grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); }
            .login-box { width: 85%; }
        }
    </style>
</head>
<body id="body">

<div id="login-overlay">
    <div class="login-box">
        <h2>CROWN TV</h2>
        <input type="text" id="username" placeholder="Username">
        <input type="password" id="password" placeholder="Password">
        <button onclick="checkLogin()">UNLOCK ACCESS</button>
        <p id="error-msg" style="color: #e50914; margin-top: 15px; font-size: 13px; display: none;">ভুল ইউজারনেম বা পাসওয়ার্ড!</p>
    </div>
</div>

<div id="main-app">
    <div class="container">
        <div class="header-nav">
            <div class="header-title">Premium Live TV</div>
            <button class="logout-btn" onclick="logout()">Logout</button>
        </div>

        <div class="player-wrapper">
            <video id="tv-player" class="video-js vjs-big-play-centered" controls preload="auto" poster="https://i.ibb.co/3pXnB9K/loading.jpg">
                <p class="vjs-no-js">To view this video please enable JavaScript.</p>
            </video>
        </div>

        <div class="channel-grid" id="playlist">
            <p style="text-align:center; width:100%;">চ্যানেল লোড হচ্ছে...</p>
        </div>
    </div>
</div>

<script src="https://vjs.zencdn.net/7.20.3/video.min.js"></script>
<script>
    const m3uUrl = 'https://raw.githubusercontent.com/cctvccplc/Tv-Test/refs/heads/main/BD26.m3u8';
    let player;

    // লগইন চেক ফাংশন
    function checkLogin() {
        const user = document.getElementById('username').value;
        const pass = document.getElementById('password').value;

        if (user === "admin1" && pass === "admin1") {
            sessionStorage.setItem('crownAuth', 'true');
            showApp();
        } else {
            document.getElementById('error-msg').style.display = 'block';
        }
    }

    // অ্যাপ দেখানোর ফাংশন
    function showApp() {
        document.getElementById('login-overlay').style.display = 'none';
        document.getElementById('main-app').style.display = 'block';
        if (!player) {
            player = videojs('tv-player');
            loadPlaylist();
        }
    }

    async function loadPlaylist() {
        try {
            const response = await fetch(m3uUrl);
            const data = await response.text();
            const lines = data.split('\n');
            const playlistElement = document.getElementById('playlist');
            playlistElement.innerHTML = '';

            let channels = [];
            for (let i = 0; i < lines.length; i++) {
                if (lines[i].startsWith('#EXTINF:')) {
                    let name = lines[i].split(',')[1];
                    let url = lines[i + 1]?.trim();
                    if (url && url.startsWith('http')) {
                        channels.push({ name, url });
                    }
                }
            }

            channels.forEach((channel, index) => {
                const btn = document.createElement('div');
                btn.className = 'channel-item';
                btn.innerText = channel.name || `Channel ${index + 1}`;
                btn.onclick = () => {
                    document.querySelectorAll('.channel-item').forEach(el => el.classList.remove('active'));
                    btn.classList.add('active');
                    player.src({ src: channel.url, type: 'application/x-mpegURL' });
                    player.play();
                    window.scrollTo({top: 0, behavior: 'smooth'});
                };
                playlistElement.appendChild(btn);

                if (index === 0) {
                    player.src({ src: channel.url, type: 'application/x-mpegURL' });
                    btn.classList.add('active');
                }
            });

        } catch (error) {
            console.error('Error fetching M3U:', error);
            document.getElementById('playlist').innerHTML = '<p style="color:red; text-align:center;">প্লেলিস্ট লোড করতে ব্যর্থ।</p>';
        }
    }

    function logout() {
        sessionStorage.removeItem('crownAuth');
        location.reload();
    }

    // পেজ লোড হলে চেক করবে আগে থেকে লগইন আছে কি না
    window.onload = () => {
        if (sessionStorage.getItem('crownAuth') === 'true') {
            showApp();
        }
    };
</script>

</body>
</html>
